---
sidebar_position: 4
title: <AsyncBoundary/>
---

This component is just wrapping [Suspense](/docs/react/src/Suspense.i18n) and [ErrorBoundary](/docs/react/src/ErrorBoundary.i18n) in this library. to use Suspense with ErrorBoundary at once easily.

### Default mode

default AsyncBoundary will return just default Suspense with ErrorBoundary.

```tsx
import { AsyncBoundary } from '@suspensive/react'

const AsyncBoundaryDefault = () => (
  <AsyncBoundary
    pendingFallback={<Loading />}
    rejectedFallback={({ reset, error }) => <button onClick={reset}>{JSON.stringify(error)}</button>}
    onReset={() => console.log('ErrorBoundary in AsyncBoundary has reset')} // ex) reset react-query cache on ErrorBoundary reset.
    onError={(error, info) => alert(JSON.stringify(error))}
  >
    <Children />
  </AsyncBoundary>
)
```

### CSROnly mode

But if you use CSROnly mode, AsyncBoundary.CSROnly will return ErrorBoundary with Suspense.CSROnly, not default Suspense.
In server, Suspense.CSROnly return fallback only. so AsyncBoundary.CSROnly return only pendingFallback in server.

```tsx
import { AsyncBoundary } from '@suspensive/react'

/** First, AsyncBoundary.CSROnly return pendingFallback.
After mount, return children only in client.
but if there is error in children, AsyncBoundary will catch this thrown error.
then rejectedFallback will be rendered. */

const AsyncBoundaryAvoidSSR = () => (
  <AsyncBoundary.CSROnly
    pendingFallback={<Loading />}
    rejectedFallback={({ reset, error }) => <button onClick={reset}>{JSON.stringify(error)}</button>}
    onReset={() => console.log('ErrorBoundary in AsyncBoundary has reset')} // ex) reset react-query cache on ErrorBoundary reset.
    onError={(error, info) => alert(JSON.stringify(error))}
  >
    <Children />
  </AsyncBoundary.CSROnly>
)
```

#### Migration support SSR gradually (AsyncBoundary.CSROnly -> default AsyncBoundary)

If you want to use default AsyncBoundary working in both SSR/CSR, You can change AsyncBoundary.CSROnly to default AsyncBoundary gradually.
