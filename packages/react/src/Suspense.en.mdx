---
sidebar_position: 1
title: Suspense
---

This component is just wrapping [React's Suspense](https://reactjs.org/docs/react-api.html#reactsuspense). to use Suspense easily in Server-side rendering environment like [Next.js](https://nextjs.org)

### `<Suspense/>`

@suspensive/react's `<Suspense/>` will be just Suspense of original React.

```tsx
// @suspensive/react's Suspense is just React.Suspense
const DefaultMode = () => (
  <Suspense fallback={<Loading />}>
    <Children />
  </Suspense>
)
```

### `<Suspense.CSROnly/>`

`<Suspense.CSROnly/>` will return fallback first. After mount, return children only in client. but in server, return fallback only.

```tsx
// This will expose children in client-side rendering only.
const CSROnlyMode = () => (
  <Suspense.CSROnly fallback={<Loading />}>
    <Children />
  </Suspense.CSROnly>
)
```

#### Migration support SSR gradually (`<Suspense.CSROnly/>` -> `<Suspense/>`)

If you want to use default Suspense working in both SSR/CSR, You can change `<Suspense.CSROnly/>` to `<Suspense/>` gradually.

## withSuspense

You can use withSuspense to wrap component easily.
we don't need to make unncessary code to wrap it if we use withSuspense like below.
withSuspense's 2nd parameter is props of `<Suspense/>` without children

```tsx
const SuspenseWrapped = withSuspense(
  function Component() {
    // code make suspending

    return <>...</>
  },
  { fallback: <Spinner /> }
)

const SuspenseCSROnlyWrapped = withSuspense.CSROnly(
  function Component() {
    // code make suspending

    return <>...</>
  },
  { fallback: <Spinner /> }
)
```
