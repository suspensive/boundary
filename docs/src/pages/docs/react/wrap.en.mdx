import { Callout } from 'nextra/components'

# wrap

<Callout type="warning">

`wrap` is experimental feature, this interfaces could be changed

</Callout>

wrap was created to wrap components with Suspense, ErrorBoudnary, ErrorBoundaryGroup, etc. provided by @suspensive/react.

```tsx /wrap/
import { wrap } from '@suspensive/react'
import { useSuspenseQuery } from '@suspensive/react-query'

export const Page = wrap
  .ErrorBoundaryGroup({ blockOutside: true })
  .ErrorBoundary({ fallback: ({ error }) => <PageErrorFallback message={error.message} /> })
  .Suspense({ fallback: <PageSkeleton /> })
  .on(
    // will make <Page/> component wrapped in <ErrorBoundaryGroup/>, <ErrorBoundary/> and <Suspense/>
    () => {
      const errorBoundaryGroup = useErrorBoundaryGroup()
      const { data: postList } = useSuspenseQuery({
        queryKey: ['posts'],
        queryFn: () => fetch(`https://exmaple.com/posts`).then((res) => res.json()),
      })

      return (
        <>
          <button onClick={errorBoundaryGroup.reset}>Reset all posts</button>
          {postList.map((post) => (
            <PostItem id={post.id} />
          ))}
        </>
      )
    }
  )

const PostItem = wrap
  .ErrorBoundary({ fallback: ({ error }) => <>{error.message}</> })
  .Suspense({ fallback: <PostSkeleton /> })
  .on<{ id: string }>(
    // will make <Post/> component have PostProps wrapped in <ErrorBoundary/> and <Suspense/>
    (props) => {
      const { data: post } = useSuspenseQuery({
        queryKey: ['posts', props.id],
        queryFn: () => fetch(`https://exmaple.com/posts/${props.id}`).then((res) => res.json()),
      })

      return <>{post.title}</>
    }
  )
```
